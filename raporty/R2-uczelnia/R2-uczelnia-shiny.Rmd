---
title: "ETAP STUDIÓW"
output: html_document
date: "06.09.2014"
runtime: shiny
---


```{r echo = FALSE, message = FALSE}
devtools::load_all('../..')

dane = read.csv2('dane.csv', stringsAsFactors = F)
lataStart = na.omit(unique(dane$ROKSTART))
lataStart = lataStart[order(lataStart)]

inputPanel(
  selectInput(
    'etap', 
    label = 'Etap studiów',
    choices = 1:2,
    selected = 1
  ),
  selectInput(
    'rok', 
    label = 'Rok rozpoczęcia etapu studiów',
    choices = lataStart,
    selected = lataStart[1]
  )
)
  
renderUI({
   dane = dane # głupie, ale potrzebne - osadza zmienną w lokalnym kontekście, żeby szablon mógł ją znaleźć
   attach(dane)
   grupaGl = STOPIEN %in% input$etap & ROKSTART %in% input$rok
   stStopienN = input$etap
   stStopienS = ifelse(input$etap == 1, '1 stopnia', '2 stopnia')
   stRok = input$rok
   
   rmarkdown::render(
       input = 'R2-uczelnia.Rmd', 
       output_format = html_document(),
       output_file = 'tmp.html'
   )
   raport = HTML(readLines('tmp.html'))
   unlink('tmp.html')
   return(raport)
})
```